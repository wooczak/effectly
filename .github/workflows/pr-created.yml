name: 'Run tests on creating a pull request'

on:
  pull_request:
    branches: 
      - 'main'

jobs:
  test-pr:
    name: 'Run unit and E2E tests',
    runs-on: ubuntu-latest

  steps: 
    - name: 'Checkout source code',
      uses: 'actions/checkout@v2'
      with:
        ref: ${{ github.ref }}

    - name: 'Run unit tests',
      run: yarn test:unit

    - name: 'Run end-to-end tests',
      run: yarn cypress:run